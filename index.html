<DOCTYPE html>
  <html>

  <head>
    <meta charset="UTF-8">
    <title>WEIRD NXC</title>
    <meta charset="UTF-8">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <!-- <link rel="shortcut icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png"> -->
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/granim/2.0.0/granim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery.scrollto@2.1.2/jquery.scrollTo.min.js"></script>

    <script src="https://cdn.babylonjs.com/babylon.js" charset="utf-8"></script>
    <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
    <script src="https://cdn.babylonjs.com/materialsLibrary/babylonjs.materials.min.js" charset="utf-8"></script>
    <script src="https://cdn.jsdelivr.net/npm/amplitudejs@latest/dist/amplitude.min.js" charset="utf-8"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r99/three.min.js"></script>
    <!-- <script src="vendors/glslCanvas.js" charset="utf-8"></script> -->
    <!-- <script src="curtain.min.js" charset="utf-8"></script> -->
    <script src = 'vendors/html2canvas.min.js'></script>
    <script src = 'vendors/glslCanvas.js'></script>
    <script src="vendors/rellax.min.js" charset="utf-8"></script>
    <script src="plugins/easingScript.js" charset="utf-8"></script>

    <link rel="stylesheet" type="text/css" media="screen" href="style.css">
  </head>

  <style>
    #mainBodyDiv{
      /* display: none; */
      width: 100%;
      height: 100%;
      position: relative;
      /* max-height: 100vh; */
      /* overflow: hidden; */
      -webkit-perspective: 800px;
      transform: translate(0,0);
    }
    #mainCanvas{

      /* display: none; */
      width: 100vw;
      height: 100%;
      position: absolute;
      top: 0;
      background: transparent;
      z-index: 1;
    }
    #gradientCanvas{

      /* display: none; */
      width: 100vw;
      height: 100%;
      position: fixed;
      top: 0;
      background: transparent;
      z-index: -1;
    }
    #threeCanvas{
      /* display: none; */
      width: 100%;
      height: 100%;
      position: absolute;
      z-index: -10
    }
    #time-container{
      position: absolute;
      bottom: 0;
      width: 100%;

    }


  </style>
  <!-- player style -->
  <style>

          div#amplitude-player {
            /* background: #FFFFFF; */
            background: rgba(#ffffff, 0);
            /* box-shadow: 0 2px 12px 8px rgba(0, 0, 0, 0.1); */
            margin: auto;
            margin-top: 20px;
            margin-bottom: 20px;
            display: flex;
            max-width: 900px ;
            width: 50%;
            flex-direction: column;
           }


          /* Small only */
          @media screen and (max-width: 39.9375em) {
            div#amplitude-player {
              flex-direction: column; } }
          /* Medium only */
          @media screen and (min-width: 40em) and (max-width: 63.9375em) {
            div#amplitude-player {
              /* max-height: 715px;  */
            } }
          /* Large and up */
          @media screen and (min-width: 64em) {
            div#amplitude-player {
              /* max-height: 715px; */
             } }
          div#amplitude-left {
            padding: 0px;
            border-right: 1px solid #CFD8DC;
            /* width: 50%; */
            display: flex;
            /* display: none; */
            flex-direction: column; }
            div#amplitude-left img.album-art {
              width: 100%; }
            div#amplitude-left div#player-left-bottom {
              flex: 1;
              background-color: #F1F1F1;
              padding: 20px 10px;
              flex: 1;
              width: 50%;
              border-radius: 26px;
              margin: auto;
              background-color: #F1F1F1;
              padding: 20px 10px;

            }
              div#amplitude-left div#player-left-bottom div#volume-container:after {
                content: "";
                display: table;
                clear: both; }

          /* Small only */
          @media screen and (max-width: 39.9375em) {
            div#amplitude-player div#amplitude-left {
              width: 100%; }
              div#amplitude-player div#amplitude-left img[amplitude-song-info="cover_art_url"] {
                width: auto;
                height: auto; } }
          div#amplitude-right {
            padding: 0px;
            overflow-y: scroll;
            /* width: 50%; */
            display: flex;
            flex-direction: column;

           }
            /* div#amplitude-right div.song { */
            div.song {
              cursor: pointer;
              display: flex;
              padding: 4px;
              /* padding: 10px; */
              border-top: 2px solid rgba(225, 225, 225, 0.2);
              border-left: 1px solid rgba(225, 225, 225, 0.1);
              border-right: 1px solid rgba(225, 225, 225, 0.3);
              box-shadow: white 0px 30px 40px -2em inset;
              0 1px 2px #fff, /*bottom external highlight*/
              0 -1px 1px #666, /*top external shadow*/
              inset 0 -1px 1px rgba(0,0,0,0.5), /*bottom internal shadow*/
              inset 0 1px 1px rgba(255,255,255,0.8); /*top internal highlight*/
              z-index: 2;
              border-radius: 50px;
            }
            div.song span.song-artist a{
              color: #b775ff;
            }
            a.song-title::after{
              content:' - '
            }
          div.song div.song-now-playing-icon-container {
                float: left;
                width: 20px;
                height: 20px;
                margin-right: 10px; }
             div.song div.song-now-playing-icon-container img.now-playing {
                  display: none;
                  margin-top: 15px; }
            div.song div.play-button-container {
                display: none;
                background: url("https://521dimensions.com/img/open-source/amplitudejs/blue-player/list-play-light.png") no-repeat;
                width: 22px;
                height: 22px;
                margin-top: 10px; }
            div.song div.play-button-container:hover {
                background: url("https://521dimensions.com/img/open-source/amplitudejs/blue-player/list-play-hover.png") no-repeat; }
            div.song.amplitude-active-song-container div.song-now-playing-icon-container img.now-playing {
                display: block; }
           div.song.amplitude-active-song-container:hover div.play-button-container {
                display: none; }
           div.song div.song-meta-data {
                float: left;
                padding-top: 10px;
                width: calc( 100% - 110px );
                display: flex;
              }
           div.song div.song-meta-data span.song-title {
                  color: #272726;
                  font-size: 16px;
                  display: block;
                  font-weight: 300;
                  white-space: nowrap;
                  overflow: hidden;
                  text-overflow: ellipsis;
                }
          div.song div.song-meta-data span.song-title::after{
                  content: ' - ';
                }
          div.song div.song-meta-data span.song-artist {
                  color: #607D8B;
                  font-size: 14px;
                  font-weight: bold;
                  text-transform: uppercase;
                  display: block;
                  white-space: nowrap;
                  overflow: hidden;
                  text-overflow: ellipsis; }
           div.song img.bandcamp-grey {
                float: left;
                display: block;
                margin-top: 10px; }
             div.song img.bandcamp-white {
                float: left;
                display: none;
                margin-top: 10px; }
            div.song span.song-duration {
                float: left;
                width: 55px;
                text-align: center;
                line-height: 45px;
                color: #607D8B;
                font-size: 16px;
                font-weight: 500; }
           div.song:after {
              content: "";
              display: table;
              clear: both; }

          /* Small only */
          @media screen and (max-width: 39.9375em) {
            div#amplitude-player div#amplitude-right {
              width: 100%; } }
          div#progress-container {
            /* width: 70%; */
            float: left;
            position: relative;
            height: 20px;
            cursor: pointer;
            width: 100%;
            background-color: pink;
            /* position: absolute; */

            /*
              IE 11
            */ }
            div#progress-container:hover input[type=range].amplitude-song-slider::-webkit-slider-thumb {
              display: block; }
            div#progress-container:hover input[type=range].amplitude-song-slider::-moz-range-thumb {
              visibility: visible; }
            div#progress-container progress#song-played-progress {
              width: 100%;
              position: absolute;
              left: 0;
              top: 8px;
              right: 0;
              width: 100%;
              z-index: 60;
              -webkit-appearance: none;
              -moz-appearance: none;
              appearance: none;
              height: 4px;
              border-radius: 5px;
              background: transparent;
              border: none;
              /* Needed for Firefox */ }
            @media all and (-ms-high-contrast: none) {
              div#progress-container *::-ms-backdrop, div#progress-container progress#song-played-progress {
                color: #00A0FF;
                border: none;
                background-color: #CFD8DC; } }
            @supports (-ms-ime-align: auto) {
              div#progress-container progress#song-played-progress {
                color: #00A0FF;
                border: none; } }
            div#progress-container progress#song-played-progress[value]::-webkit-progress-bar {
              background: none;
              border-radius: 5px; }
            div#progress-container progress#song-played-progress[value]::-webkit-progress-value {
              background-color: #00A0FF;
              border-radius: 5px; }
            div#progress-container progress#song-played-progress::-moz-progress-bar {
              background: none;
              border-radius: 5px;
              background-color: #00A0FF;
              height: 5px;
              margin-top: -2px; }
            div#progress-container progress#song-buffered-progress {
              position: absolute;
              left: 0;
              top: 8px;
              right: 0;
              width: 100%;
              z-index: 10;
              -webkit-appearance: none;
              -moz-appearance: none;
              appearance: none;
              height: 4px;
              border-radius: 5px;
              background: transparent;
              border: none;
              background-color: #D7DEE3; }
            div#progress-container progress#song-buffered-progress[value]::-webkit-progress-bar {
              background-color: #CFD8DC;
              border-radius: 5px; }
            div#progress-container progress#song-buffered-progress[value]::-webkit-progress-value {
              background-color: #78909C;
              border-radius: 5px;
              transition: width .1s ease; }
            div#progress-container progress#song-buffered-progress::-moz-progress-bar {
              background: none;
              border-radius: 5px;
              background-color: #78909C;
              height: 5px;
              margin-top: -2px; }
            div#progress-container progress::-ms-fill {
              border: none; }
          @-moz-document url-prefix() {
            div#progress-container progress#song-buffered-progress {
              top: 9px;
              border: none; } }
            @media all and (-ms-high-contrast: none) {
              div#progress-container *::-ms-backdrop, div#progress-container progress#song-buffered-progress {
                color: #78909C;
                border: none; } }
            @supports (-ms-ime-align: auto) {
              div#progress-container progress#song-buffered-progress {
                color: #78909C;
                border: none; } }
            div#progress-container input[type=range] {

                  -webkit-appearance: none;
                  width: 100vw;
                  margin: 7.5px 0;
                  position: absolute;
                  z-index: 9999;
                  top: -7px;
                  /* height: 64px; */
                  height: 18px;
                  cursor: pointer;
                  background-color: inherit;

            }
            div#progress-container input[type=range]:focus {
              outline: none; }
            div#progress-container input[type=range]::-webkit-slider-runnable-track {
              width: 100%;
              height: 0px;
              /* height: 10px; */
              cursor: pointer;
              box-shadow: 0px 0px 0px rgba(0, 0, 0, 0), 0px 0px 0px rgba(13, 13, 13, 0);
              background: #0075a9;
              border-radius: 0px;
              border: 0px solid #010101;
             }
            div#progress-container input[type=range]::-webkit-slider-thumb {
              box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
              border: 1px solid #00a0ff;
              height: 15px;
              width: 15px;
              border-radius: 16px;
              background: #00a0ff;
              cursor: pointer;
              -webkit-appearance: none;
              margin-top: -7.5px; }
            div#progress-container input[type=range]:focus::-webkit-slider-runnable-track {
              background: #00adfb; }
            div#progress-container input[type=range]::-moz-range-track {
              width: 100%;
              height: 0px;
              cursor: pointer;
              box-shadow: 0px 0px 0px rgba(0, 0, 0, 0), 0px 0px 0px rgba(13, 13, 13, 0);
              background: #0075a9;
              border-radius: 0px;
              border: 0px solid #010101; }
            div#progress-container input[type=range]::-moz-range-thumb {
              box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
              border: 1px solid #00a0ff;
              height: 15px;
              width: 15px;
              border-radius: 16px;
              background: #00a0ff;
              cursor: pointer; }
            div#progress-container input[type=range]::-ms-track {
              width: 100%;
              height: 0px;
              cursor: pointer;
              background: transparent;
              border-color: transparent;
              color: transparent; }
            div#progress-container input[type=range]::-ms-fill-lower {
              background: #003d57;
              border: 0px solid #010101;
              border-radius: 0px;
              box-shadow: 0px 0px 0px rgba(0, 0, 0, 0), 0px 0px 0px rgba(13, 13, 13, 0); }
            div#progress-container input[type=range]::-ms-fill-upper {
              background: #0075a9;
              border: 0px solid #010101;
              border-radius: 0px;
              box-shadow: 0px 0px 0px rgba(0, 0, 0, 0), 0px 0px 0px rgba(13, 13, 13, 0); }
            div#progress-container input[type=range]::-ms-thumb {
              box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;
              border: 1px solid #00a0ff;
              height: 15px;
              width: 15px;
              border-radius: 16px;
              background: #00a0ff;
              cursor: pointer;
              height: 0px;
              display: block; }
            @media all and (-ms-high-contrast: none) {
              div#progress-container *::-ms-backdrop, div#progress-container input[type="range"].amplitude-song-slider {
                padding: 0px; }
              div#progress-container *::-ms-backdrop, div#progress-container input[type=range].amplitude-song-slider::-ms-thumb {
                height: 15px;
                width: 15px;
                border-radius: 10px;
                cursor: pointer;
                margin-top: -8px; }
              div#progress-container *::-ms-backdrop, div#progress-container input[type=range].amplitude-song-slider::-ms-track {
                border-width: 15px 0;
                border-color: transparent; }
              div#progress-container *::-ms-backdrop, div#progress-container input[type=range].amplitude-song-slider::-ms-fill-lower {
                background: #CFD8DC;
                border-radius: 10px; }
              div#progress-container *::-ms-backdrop, div#progress-container input[type=range].amplitude-song-slider::-ms-fill-upper {
                background: #CFD8DC;
                border-radius: 10px; } }
            @supports (-ms-ime-align: auto) {
              div#progress-container input[type=range].amplitude-song-slider::-ms-thumb {
                height: 15px;
                width: 15px;
                margin-top: 3px; } }
            div#progress-container input[type=range]:focus::-ms-fill-lower {
              background: #0075a9; }
            div#progress-container input[type=range]:focus::-ms-fill-upper {
              background: #00adfb; }

          div#control-container {
            margin-top: 25px;
            margin-top: 20px;
            background-color: red;
            display: flex;
            /* flex-direction: column; */

          }
            div#control-container div#repeat-container {
              width: 25%;
              float: left;
              padding-top: 20px;
             margin: auto;
             }

              div#control-container div#repeat-container div#repeat {
                width: 24px;
                height: 19px;
                cursor: pointer; }
                div#control-container div#repeat-container div#repeat.amplitude-repeat-off {
                  background: url("https://521dimensions.com/img/open-source/amplitudejs/blue-player/repeat-off.svg"); }
                div#control-container div#repeat-container div#repeat.amplitude-repeat-on {
                  background: url("https://521dimensions.com/img/open-source/amplitudejs/blue-player/repeat-on.svg"); }
              div#control-container div#repeat-container div#shuffle {
                width: 23px;
                height: 19px;
                cursor: pointer;
                float: right; }
                div#control-container div#repeat-container div#shuffle.amplitude-shuffle-off {
                  background: url("https://521dimensions.com/img/open-source/amplitudejs/blue-player/shuffle-off.svg"); }
                div#control-container div#repeat-container div#shuffle.amplitude-shuffle-on {
                  background: url("https://521dimensions.com/img/open-source/amplitudejs/blue-player/shuffle-on.svg"); }
            @media all and (-ms-high-contrast: none) {
              div#control-container *::-ms-backdrop, div#control-container div#control-container {
                margin-top: 40px;
                float: none; } }
            div#control-container div#central-control-container {
              /* width: 50%; */
              float: left; }
              div#control-container div#central-control-container div#central-controls {
                width: 130px;
                margin: auto; }
                div#control-container div#central-control-container div#central-controls div#previous {
                  display: inline-block;
                  width: 40px;
                  height: 40px;
                  cursor: pointer;
                  background: url("https://521dimensions.com/img/open-source/amplitudejs/blue-player/prev.svg");
                  background-repeat: no-repeat;
                  float: left;
                  margin-top: 10px;
                  margin-right: -5px; }
                div#control-container div#central-control-container div#central-controls div#play-pause {
                  display: inline-block;
                  width: 60px;
                  height: 60px;
                  cursor: pointer;
                  float: left; }
                  div#control-container div#central-control-container div#central-controls div#play-pause.amplitude-paused {
                    background: url("https://521dimensions.com/img/open-source/amplitudejs/blue-player/play.svg"); }
                  div#control-container div#central-control-container div#central-controls div#play-pause.amplitude-playing {
                    background: url("https://521dimensions.com/img/open-source/amplitudejs/blue-player/pause.svg"); }
                div#control-container div#central-control-container div#central-controls div#next {
                  display: inline-block;
                  width: 40px;
                  height: 40px;
                  cursor: pointer;
                  background: url("https://521dimensions.com/img/open-source/amplitudejs/blue-player/next.svg");
                  background-repeat: no-repeat;
                  float: left;
                  margin-top: 10px;
                  margin-left: -5px; }
            div#control-container div#volume-container {
              width: 25%;
              float: left;
              padding-top: 20px; }
              div#control-container div#volume-container div#shuffle-right {
                width: 23px;
                height: 19px;
                cursor: pointer;
                margin: auto; }
                div#control-container div#volume-container div#shuffle-right.amplitude-shuffle-off {
                  background: url("https://521dimensions.com/img/open-source/amplitudejs/blue-player/shuffle-off.svg"); }
                div#control-container div#volume-container div#shuffle-right.amplitude-shuffle-on {
                  background: url("https://521dimensions.com/img/open-source/amplitudejs/blue-player/shuffle-on.svg"); }
            div#control-container div.amplitude-mute {
              cursor: pointer;
              width: 25px;
              height: 19px;
              float: left; }
              div#control-container div.amplitude-mute.amplitude-not-muted {
                /* background: url("https://521dimensions.com/img/open-source/amplitudejs/blue-players/volume.svg"); */
                background-repeat: no-repeat; }
              div#control-container div.amplitude-mute.amplitude-muted {
                background: url("https://521dimensions.com/img/open-source/amplitudejs/blue-player/mute.svg");
                background-repeat: no-repeat; }

          div#control-container:after {
            content: "";
            display: table;
            clear: both; }

          /* Small only */
          @media screen and (max-width: 39.9375em) {
            div#amplitude-player div#repeat-container div#repeat {
              margin-left: auto;
              margin-right: auto;
              float: none; }
            div#amplitude-player div#repeat-container div#shuffle {
              display: none; }
            div#amplitude-player div#volume-container div.volume-controls {
              display: none; }
            div#amplitude-player div#volume-container div#shuffle-right {
              display: block; } }
          /* Medium only */
          @media screen and (min-width: 40em) and (max-width: 63.9375em) {
            div#amplitude-player div#repeat-container div#repeat {
              margin-left: auto;
              margin-right: auto;
              float: none; }
            div#amplitude-player div#repeat-container div#shuffle {
              display: none; }
            div#amplitude-player div#volume-container div.volume-controls {
              display: none; }
            div#amplitude-player div#volume-container div#shuffle-right {
              display: block; } }
          /* Large and up */
          @media screen and (min-width: 64em) {
            div#amplitude-player div#repeat-container div#repeat {
              margin-left: 10px;
              margin-right: 20px;
              float: left; }
            div#amplitude-player div#volume-container div#shuffle-right {
              display: none; } }
          input[type=range].amplitude-volume-slider {
            -webkit-appearance: none;
            width: calc( 100% - 33px);
            float: left;
            margin-top: 10px;
            margin-left: 5px; }

          @-moz-document url-prefix() {
            input[type=range].amplitude-volume-slider {
              margin-top: 0px; } }
          @supports (-ms-ime-align: auto) {
            input[type=range].amplitude-volume-slider {
              margin-top: 3px;
              height: 12px;
              background-color: rgba(255, 255, 255, 0) !important;
              z-index: 999;
              position: relative; }

            div.ms-range-fix {
              height: 1px;
              background-color: #A9A9A9;
              width: 67%;
              float: right;
              margin-top: -6px;
              z-index: 9;
              position: relative; } }
          @media all and (-ms-high-contrast: none) {
            *::-ms-backdrop, input[type=range].amplitude-volume-slider {
              margin-top: -24px;
              background-color: rgba(255, 255, 255, 0) !important; } }
          input[type=range].amplitude-volume-slider:focus {
            outline: none; }

          input[type=range].amplitude-volume-slider::-webkit-slider-runnable-track {
            width: 75%;
            height: 1px;
            cursor: pointer;
            animate: 0.2s;
            background: #CFD8DC; }

          input[type=range].amplitude-volume-slider::-webkit-slider-thumb {
            height: 10px;
            width: 10px;
            border-radius: 10px;
            background: #00A0FF;
            cursor: pointer;
            margin-top: -4px;
            -webkit-appearance: none; }

          input[type=range].amplitude-volume-slider:focus::-webkit-slider-runnable-track {
            background: #CFD8DC; }

          input[type=range].amplitude-volume-slider::-moz-range-track {
            width: 100%;
            height: 1px;
            cursor: pointer;
            animate: 0.2s;
            background: #CFD8DC; }

          input[type=range].amplitude-volume-slider::-moz-range-thumb {
            height: 10px;
            width: 10px;
            border-radius: 10px;
            background: #00A0FF;
            cursor: pointer;
            margin-top: -4px; }

          input[type=range].amplitude-volume-slider::-ms-track {
            width: 100%;
            height: 1px;
            cursor: pointer;
            animate: 0.2s;
            background: transparent;
            /*leave room for the larger thumb to overflow with a transparent border */
            border-color: transparent;
            border-width: 15px 0;
            /*remove default tick marks*/
            color: transparent; }

          input[type=range].amplitude-volume-slider::-ms-fill-lower {
            background: #CFD8DC;
            border-radius: 10px; }

          input[type=range].amplitude-volume-slider::-ms-fill-upper {
            background: #CFD8DC;
            border-radius: 10px; }

          input[type=range].amplitude-volume-slider::-ms-thumb {
            height: 10px;
            width: 10px;
            border-radius: 10px;
            background: #00A0FF;
            cursor: pointer;
            margin-top: 2px; }

          input[type=range].amplitude-volume-slider:focus::-ms-fill-lower {
            background: #CFD8DC; }

          input[type=range].amplitude-volume-slider:focus::-ms-fill-upper {
            background: #CFD8DC; }

          input[type=range].amplitude-volume-slider::-ms-tooltip {
            display: none; }

          div#time-container span.current-time {
            color: #607D8B;
            font-size: 14px;
            font-weight: 700;
            float: left;
            width: 15%;
            text-align: center;
            position: absolute;
            left: 10;
          }
          div#time-container span.duration {
            color: #607D8B;
            font-size: 14px;
            font-weight: 700;
            float: left;
            width: 15%;
            text-align: center; }

          div#time-container:after {
            content: "";
            display: table;
            clear: both; }

          div#meta-container {
            text-align: center;
            margin-top: 5px; }
            div#meta-container span.song-name {
              display: block;
              color: #272726;
              font-size: 20px;
              font-family: 'Open Sans', sans-serif;
              white-space: nowrap;
              overflow: hidden;
              text-overflow: ellipsis; }
            div#meta-container div.song-artist-album {
              color: #607D8B;
              font-size: 14px;
              font-weight: 700;
              text-transform: uppercase;
              font-family: 'Open Sans', sans-serif;
              white-space: nowrap;
              overflow: hidden;
              text-overflow: ellipsis;
              display: flex;
              justify-content: center;

            }
              div#meta-container div.song-artist-album span {
                display: block; }

          /*
            3. Layout
          */
          body {
            /* background-image: -webkit-linear-gradient(316deg, #3BD2AE 0%, #36BAC2 100%); */
            /* background-image: linear-gradient(-226deg, #3BD2AE 0%, #36BAC2 100%);
             */
            height: 100vh;
            -webkit-font-smoothing: antialiased;
            font-family: "Helvetica Neue",Helvetica,Roboto,Arial,sans-serif;
            line-height: 1.5; }
          div.amplitude-wave-form{
              margin-top: -14px;
              display: none;
          }

           div.amplitude-wave-form svg{
                stroke: #00a0ff;
                height: 50px;
                width: 100%;
                stroke-width: .5px;
          }
           div.amplitude-wave-form svg g{
             stroke: #00a0ff;
             height: 50px;
             width: 100%;
          }
           div.amplitude-wave-form svg g path{
             stroke: #00a0ff;
             height: 50px;
             width: 100%;
          }

          div#large-visualization{
              width: 100%;
              background-color: black;
              visibility: hidden;
            }
  </style>
  <!-- MY CUSTOM CLASSES -->
  <style>
     .myGradientFill{
     /* background: linear-gradient(270deg, #ff0000, #e1fb0f, #a958bb); */
     background: linear-gradient(270deg, rgba(255, 0, 246, 0.45), rgba(196, 204, 110, 0.36), rgba(138, 82, 246, 0.51));
     background-blend-mode: darken;
     background-size: 600% 600%;
     -webkit-animation: AnimationName 30s ease infinite;
     -moz-animation: AnimationName 30s ease infinite;
     animation: AnimationName 30s ease infinite;
     }

     @-webkit-keyframes AnimationName {
     0%{background-position:0% 50%}
     50%{background-position:100% 50%}
     100%{background-position:0% 50%}
     }
     @-moz-keyframes AnimationName {
     0%{background-position:0% 50%}
     50%{background-position:100% 50%}
     100%{background-position:0% 50%}
     }
     @keyframes AnimationName {
     0%{background-position:0% 50%}
     50%{background-position:100% 50%}
     100%{background-position:0% 50%}
     }

     .myAlbumArtClass{
     max-width: 200px;
     }
     .playListNav{
     border-top: 2px solid rgba(225, 225, 225, 0.2);
     border-left: 1px solid rgba(225, 225, 225, 0.1);
     border-right: 1px solid rgba(225, 225, 225, 0.3);
     box-shadow: white 0px 30px 40px -2em inset;
     }
     #nextButton{
     position: fixed;
     height: 80px;
     width: 80px;
     right: 50;
     top: 50%;
     /* background-color: black; */
     z-index: 2;
     }
     #prevButton{
     position: fixed;
     height: 80px;
     width: 80px;
     left: 50;
     top: 50%;
     /* background-color: black; */
     z-index: 2;
     }
     #player-left-bottom{
     position: absolute;
     bottom: 0;
     width: 100%;
     display: none;
     }
     .albumSceneContainer{
     width: 100vw;
     height: 100vh;
     background-color: red;
     justify-content: center;
     align-items: center;
     position: relative;
     }
     .albumPlaylistContainer{
     position: absolute;
     top: 40%;
     left: 50%;
     transform: translate(-50%, -50%);
     width: 50vw;
     height: 50vh;
     margin: auto;
     z-index: 5;
     }

     #allPlaylistsContainer{
     width: 400vw;
     display: flex;
     /* display: none; */
     flex-direction: column;
     justify-content: space-between;

     }
     #logoHolder{
     position: fixed;
     top:0;
     width: 100px;
     height: 100px;
     z-index: 5;
     }
     #logoHolder img{
     width: 100%;
     }
     .playlistTexture{
     display: none;

     }

     .songProgressBackground{
     /* width: 100%;
     height: 100%;
     background-color: red; */
     width: 100%;
     /* background-color: red; */
     position: absolute;
     left: -100%;
     top: 0;
     height: 55px;
     overflow: hidden;
     z-index: -1;
     /* border-radius: 20px; */
     }
     .activeSongProgressBackground{
     width: 100%;
     position: absolute;
     left: -100%;
     top: 0;
     height: 55px;
     overflow: hidden;
     z-index: -1;
     animation: wave 10s cubic-bezier( 0.36, 0.45, 0.63, 0.53) infinite;
     transform: translate3d(0, 0, 0);
     background: url(data/svg/wave1.svg) ;
     background-size: cover;
     background-repeat: no-repeat;
     anim
     /* transition: left 10ms ease-out; */
     }
     .amplitude-song-container{
     position: relative;
     overflow: hidden;
     transition: opacity .5s ease-out;
     }
     progress#song-played-progress{
     /* display: none; */
     }

     /* .wave {
     background: url() repeat-x;
     position: absolute;
     top: -198px;
     width: 6400px;
     height: 198px;
     animation: wave 100s cubic-bezier( 0.36, 0.45, 0.63, 0.53) infinite;
     transform: translate3d(0, 0, 0);
     } */

     .wave:nth-of-type(2) {
     top: -175px;
     animation: wave 7s cubic-bezier( 0.36, 0.45, 0.63, 0.53) -.125s infinite, swell 7s ease -1.25s infinite;
     opacity: 1;
     }

     @keyframes wave {
     0% {
     /* margin-left: 0; */
     background-position: -10% 0%
     -webkit-filter: hue-rotate(0deg);
     /* top: 0 */
     }
     100% {
     /* margin-left: 0; */
     /* top: 0px; */
     -webkit-filter: hue-rotate(350deg);
     background-position: 10% 100%
     }
     }

     @keyframes swell {
     0%, 100% {
     transform: translate3d(0,-25px,0);
     }
     50% {
     transform: translate3d(0,5px,0);
     }
     }
     @-webkit-keyframes hue-rotate {
     0% {
     -webkit-filter: hue-rotate(0deg);
     }

     100% {
     -webkit-filter: hue-rotate(350deg);
     }
     }
     #canvasContainer{
       width: 100vw;
       height: 100vh;
       position: fixed;
      z-index: 1;
     }
     #glslCanvas{
       position: absolute;
       width: 100vw;
       height: 100vw;
       top: 0;
       left: 0;
       z-index: 10;
     }

  </style>

  <body>
  <div id="logoHolder">
    <img src="logo.png" alt="">
  </div>
  <div id="canvasContainer">
    <canvas id="mainCanvas"></canvas>

  </div>
  <div id="mainBodyDiv">
      <div id="nextButton" class = 'playListNav' onclick = 'switchPlaylist(this)'></div>
      <div id="prevButton" class = 'playListNav' onclick = 'switchPlaylist(this)'></div>

      <div id="allPlaylistsContainer"></div>

        <canvas id="threeCanvas">
          <div id="capture" style="padding: 10px; background: #f5da55">
              <h4 style="color: #000; ">Hello world!</h4>
          <!-- </div> -->
        </canvas>
        <!-- Blue Playlist Container -->
        <img data-amplitude-song-info="cover_art_url" class="myAlbumArtClass"/>
        <!-- <div id="allPlaylistsContainer"> -->
          <div id="blue-playlist-container">
            <progress id = 'song-played-progress'
            <div id="amplitude-player">
                <div id="amplitude-left">
                    <div class="amplitude-visualization" id="large-visualization"></div>
                </div>

                <!-- <div id="amplitude-right"></div> -->
                <!-- End Right Side Player -->
          </div>
        </div>
        <!-- CONTROLS -->
        <div id="player-left-bottom">

          <div id="time-container">

                <div id="control-container">
                    <div id="repeat-container">
                        <div class="amplitude-shuffle amplitude-shuffle-off" id="shuffle" data-amplitude-playlist='WEIRD NXC - ACT 1'></div>
                    </div>
                    <div id="central-control-container">
                        <div id="central-controls">
                            <div class="amplitude-prev" id="previous" data-amplitude-playlist='WEIRD NXC - ACT 1'></div>
                            <div class="amplitude-play-pause" id="play-pause" data-amplitude-playlist='WEIRD NXC - ACT 1'></div>
                            <div class="amplitude-next" id="next" data-amplitude-playlist='WEIRD NXC - ACT 1'></div>
                        </div>
                    </div>
                    <div id="repeat-container">
                        <div class="amplitude-repeat" id="repeat" data-amplitude-playlist='WEIRD NXC - ACT 1'></div>
                    </div>

                </div>
                <div id="volume-container">
                    <div class="volume-controls">
                        <div class="amplitude-mute amplitude-not-muted" data-amplitude-playlist='WEIRD NXC - ACT 1'></div>
                        <input type="range" class="amplitude-volume-slider" data-amplitude-playlist='WEIRD NXC - ACT 1'/>
                        <div class="ms-range-fix"></div>
                    </div>
                </div>
                <!-- <span class="current-time">
                    <span class="amplitude-current-minutes" ></span>:<span class="amplitude-current-seconds"></span>
                </span> -->
              <div id="progress-container">
                  <div class="amplitude-wave-form" data-amplitude-playlist='WEIRD NXC - ACT 1'></div>
                  <input type="range" class="amplitude-song-slider " data-amplitude-playlist='WEIRD NXC - ACT 1'/>
                    <!-- <progress id="song-played-progress" class="amplitude-song-played-progress" data-amplitude-playlist='WEIRD NXC - ACT 1'></progress> -->
                    <progress id="song-buffered-progress" class="amplitude-buffered-progress" value="0" data-amplitude-playlist='WEIRD NXC - ACT 1'></progress>
                </div>
                <!-- <span class="duration"> -->
                    <!-- <span class="amplitude-duration-minutes"></span>:<span class="amplitude-duration-seconds"></span> -->
                <!-- </span> -->
            </div>



        </div>
      </div>
    </div>
      <canvas id="gradientCanvas"></canvas>
      <canvas class = 'glslCanvas' data-fragment-url = 'data/shader.frag' id="glsl"></canvas>
      <!-- PAPER.JS SCRIPT -->
      <script>
        // var path;
        // paper.install(window);
        //
        // 	window.onload = function() {
        // 		// Get a reference to the canvas object
        // 		// Create an empty project and a view for the canvas:
        // 		var canvas = document.getElementById('myGradCanv');
        // 		paper.setup(canvas);
        // 		//END PROJECT SET UP;
        //
        //
        //   var smooth = true;
        //   var mousePos = view.center / 2;
        //   var pathHeight = mousePos.y;
        //   var group = new Group();
        //
        //   path = new Path.Circle({
        //       center: view.center,
        //   		radius: 50,
        //   		strokeWidth: 0
        //   });
        //
        //
        //   path.fillColor = {
        //       gradient: {
        //           // stops: [['black', 0.05], ['blue', 0.2], ['rgb(208, 208, 208)', 1]],
        //           // stops: [['black', 0.05], ['blue', 0.2], ['rgb(208, 208, 208)', 1]],
        //           stops: [['rgb(208, 208, 208)', 0.3], ['blue', 0.2], ['rgb(208, 208, 208)', 1]],
        //           radial: true
        //       },
        //       origin: path.position,
        //       destination: path.bounds.rightCenter
        //   };
        //   group.addChild(path);
        //
        //   for(var i=0; i < 1; i++ ){
        //   	var cl = path.clone();
        //   	cl.position.x += i * 40;
        //   	// cl.strokeColor = 'black';
        //   	group.addChildren(cl);
        //
        //   }
        //
        //   var text = new PointText({
        //       point:  view.center,
        //       fillColor: 'black',
        //       fontFamily: 'Saira',
        //       fontSize: 12,
        //   		justification: 'left',
        //   	  // content: 'Frank.LD'
        //   });
        //   		//VARIABLES FOR MOUSE MOVE
        //   		var mousePos = view.center;
        //   		view.onMouseDown = function(event){
        //   			var mp = event.point;
        //   			group.children.forEach(function(a){
        //   				a.tween({position: mp }, {duration: 150 , ease: 'easeInOutQuad' });
        //   			});
        //   		}
        //   		view.onMouseDown = function(event){
        //   			var mp = event.point;
        //   			group.children.forEach(function(a){
        //   				a.tween({position: mp }, {duration: 150 , ease: 'easeInOutQuad' });
        //   			});
        //   		}
        //   		view.onMouseMove = function(event) {
        //   			mousePos = event.point;
        //   		}
        //
        //   		view.onFrame = function(event) {
        //   			var delta1 = mousePos.subtract(group.position);
        //   			group.position = group.position.add(delta1.divide(5));
        //   		}
        //
        //
        //   		view.onResize = function(event) {
        //   			text.position = view.center;
        //   		}
        //   		// Draw the view now:
        //   		paper.view.draw();
        //
        //
        //   	}
      </script>
      <!-- Player script  -->
      <script>
        // window.addEventListener("load", function() {
        //   var mouse = {
        //     position: {
        //       x: 0,
        //       y: 0
        //     },
        //     prevPosition: {
        //       x: 0,
        //       y: 0
        //     },
        //     velocity: 0
        //   };
        //
        //   function lerp (start, end, amount){
        //     return (1 - amount) * start + amount * end;
        //   }
        //
        //   // set up our WebGL context and append the canvas to our wrapper
        //   var webGLCurtain = new Curtains({
        //     container: "canvas",
        //     antialias: false, // render targets will disable default antialiasing anyway
        //   });
        //
        //   webGLCurtain.onRender(function() {
        //     // update our planes deformation
        //     // increase/decrease the effect
        //     planesDeformations = lerp(planesDeformations, 0, 0.02);
        //   }).onScroll(function() {
        //     // get scroll deltas to apply the effect on scroll
        //     var delta = webGLCurtain.getScrollDeltas();
        //
        //     // invert value for the effect
        //     delta.y = -delta.y;
        //
        //     // threshold
        //     if(delta.y > 30) {
        //       delta.y = 30;
        //     }
        //     else if(delta.y < -30) {
        //       delta.y = -30;
        //     }
        //
        //     if(Math.abs(delta.y) > Math.abs(planesDeformations)) {
        //       planesDeformations = lerp(planesDeformations, delta.y, 0.5);
        //     }
        //   }).onError(function() {
        //     // we will add a class to the document body to display original images
        //     document.body.classList.add("no-curtains", "planes-loaded");
        //   }).onContextLost(function() {
        //     // on context lost, try to restore the context
        //     webGLCurtain.restoreContext();
        //   });
        //
        //   // we will keep track of all our planes in an array
        //   var planes = [];
        //   var planesDeformations = 0;
        //
        //   // get our planes elements
        //   var planeElements = document.getElementsByClassName("plane");
        //
        //
        //   // all planes will have the same parameters
        //   var params = {
        //     vertexShaderID: "plane-vs", // our vertex shader ID
        //     fragmentShaderID: "plane-fs", // our fragment shader ID
        //     shareProgram: true, // share planes program to improve plane creation speed
        //     widthSegments: 10,
        //     heightSegments: 10,
        //     drawCheckMargins: {
        //       top: 100,
        //       right: 0,
        //       bottom: 100,
        //       left: 0,
        //     },
        //     uniforms: {
        //       mousePosition: {
        //         name: "uMousePosition",
        //         type: "2f",
        //         value: [mouse.position.x, mouse.position.y]
        //       },
        //       mouseVelocity: {
        //         name: "uMouseVelocity",
        //         type: "1f",
        //         value: mouse.velocity
        //       },
        //       planeDeformation: {
        //         name: "uPlaneDeformation",
        //         type: "1f",
        //         value: 0,
        //       },
        //     }
        //   };
        //
        //   // add our planes and handle them
        //   for(var i = 0; i < planeElements.length; i++) {
        //     planes.push(webGLCurtain.addPlane(planeElements[i], params));
        //
        //     handlePlanes(i);
        //   }
        //
        //
        //   // handle all the planes
        //   function handlePlanes(index) {
        //     var plane = planes[index];
        //
        //     // check if our plane is defined and use it
        //     plane && plane.onLoading(function() {
        //       //console.log(plane.loadingManager.sourcesLoaded);
        //     }).onReady(function() {
        //       // once everything is ready, display everything
        //       if(index === planes.length - 1) {
        //         document.body.classList.add("planes-loaded");
        //       }
        //
        //       window.addEventListener("mousemove", function(e) {
        //         onMouseMove(e, plane);
        //       });
        //
        //       window.addEventListener("touchmove", function(e) {
        //         onMouseMove(e, plane);
        //       });
        //     }).onRender(function() {
        //       // update the uniform
        //       plane.uniforms.planeDeformation.value = planesDeformations;
        //     });
        //   }
        //
        //   function onMouseMove(e, plane) {
        //     mouse.prevPosition.x = mouse.position.x;
        //     mouse.prevPosition.y = mouse.position.y;
        //
        //     if(e.targetTouches) {
        //       mouse.position.x = e.targetTouches[0].clientX;
        //       mouse.position.y = e.targetTouches[0].clientY;
        //     }
        //     else {
        //       mouse.position.x = e.clientX;
        //       mouse.position.y = e.clientY;
        //     }
        //
        //     mouse.velocity.x = mouse.prevPosition.x - mouse.position.x;
        //     mouse.velocity.y = mouse.prevPosition.y - mouse.position.y;
        //
        //     // convert our mouse/touch position to coordinates relative to the vertices of the plane
        //     var mouseCoords = plane.mouseToPlaneCoords(mouse.position.x, mouse.position.y);
        //
        //     // update uniform
        //     plane.uniforms.mousePosition.value = [mouseCoords.x, mouseCoords.y];
        //     plane.uniforms.mouseVelocity.value = [mouse.velocity.x, mouse.velocity.y];
        //   }
        //
        //   var shaderPassParams = {
        //     fragmentShaderID: "shaderpass-fs", // we'll be using the lib default vertex shader
        //     uniforms: {
        //       timer: {
        //         name: "uTimer",
        //         type: "1f",
        //         value: 0,
        //       },
        //       displacement: {
        //         name: "uDisplacement",
        //         type: "1f",
        //         value: 0,
        //       },
        //     },
        //   };
        //
        //   var shaderPass = webGLCurtain.addShaderPass(shaderPassParams);
        //
        //   // if our shader pass has been successfully created
        //   if(shaderPass) {
        //     shaderPass.onReady(function() {
        //       console.log("shader pass is ready");
        //     }).onRender(function() {
        //       // update the uniforms
        //       shaderPass.uniforms.timer.value++;
        //       shaderPass.uniforms.displacement.value = planesDeformations / 5;
        //     });
        //   }
        //   });
      </script>

      <script>
      // <!-- <script defer type = 'module'> -->
        // import {initializeLights, initializeParticleSystem, dynamicCanvasMaterial, initializeCamera} from '/modules/babylonSetup.js'
        var songHTMLSections = [];
        var albumPlaylists = [];
        var playlistContainer = document.getElementById('amplitude-right')
        var songDataObjs;
        var amplitudeDataObjs;
        var rawJSON;
        var headerNames;
        var headerCells;
        var cells;
        var currentPlayListIndex = 0;
        var albumObjs;

        var scrollPercentage;

        var activeSongContainer;

        var gradientObjs = {
          'album1': [['rgb(163, 121, 176)', 'rgb(213, 57, 140)'], ['rgb(22, 240, 249)', 'rgb(0, 255, 5)']],
          'album2': [['rgb(135, 135, 135)', 'rgb(61, 61, 61)'], ['rgb(74, 74, 74)', 'rgb(0, 0, 0)']]
        }

        var granimInstance = new Granim({
              element: '#gradientCanvas',
              direction: 'top-bottom',
              isPausedWhenNotInView: true,
              states : {
                  "default-state": {
                      gradients: [
                          ['rgb(254, 178, 58)', 'rgb(252, 93, 244)'],
                          ['rgb(143, 87, 0)', 'rgb(126, 0, 120)']
                      ]
                  },
                  '1': {
                    gradients: [
                        ['rgb(133, 0, 0)', 'rgb(12, 236, 0)'],
                        ['rgb(133, 0, 0)', 'rgb(12, 236, 0)']
                    ]
                  },
                  '2':{
                    gradients: [
                        ['rgb(252, 252, 252)', 'rgb(244, 186, 211)'],
                        ['rgb(252, 252, 252)', 'rgb(244, 186, 211)']
                    ]
                  },
                  '3':{
                    gradients: [
                        ['rgb(14, 14, 14)' , 'rgb(92, 92, 92)'],
                        ['rgb(14, 14, 14)' , 'rgb(92, 92, 92)']
                    ]
                  },
                  '4':{
                    gradients: [
                        ['rgb(254, 178, 58)', 'rgb(252, 93, 244)'],
                        ['rgb(254, 178, 58)', 'rgb(252, 93, 244)'],
                    ]
                  },
                  '5':{
                    gradients: [
                        ['rgb(228, 225, 225)', 'rgb(255, 255, 255)'],
                        ['rgb(0, 255, 99)', 'rgb(0, 124, 255)'],
                    ]
                  }
              }
          });

        const songDataSheetURL = 'https://spreadsheets.google.com/feeds/cells/1A5fo1IWGw-XkjIqPXYb7sZfPvDIYMOv-vOwawq14ARo/1/public/full?alt=json'
        var rellx = new Rellax('.rellax')
        // var sandbox = new GlslCanvas(document.querySelector('#glslCanvas'))

        var songDataObjs = generateObjectFromSpreadData(songDataSheetURL).then(function(returnData){
            songDataObjs = returnData;
            let albumNameColumn = getAllValuesInColumn(headerCells, cells, 'album', true)
            let uniqueAlbumNames = albumNameColumn.filter(onlyUnique)
            let testName = uniqueAlbumNames[0]
            let testGroup = groupBy(songDataObjs, obj => obj.album)
            var progressArray = []
            let referenceProgressBar = document.getElementById('song-played-progress');
            console.log('REFERENCEPROGRESSBAR', referenceProgressBar)
            albumObjs =  makeAlbumObjs(testGroup, document.querySelector('#allPlaylistsContainer'))

            amplitudeDataObjs = generateAmpltiudeDataObjArray(albumObjs)
            // console.log('AMPLITUDEDATAOBJS', amplitudeDataObjs)
            amplitudeDataObjs.callbacks = {
              play: function(e){
                let activeSongMetaData = Amplitude.getActiveSongMetadata()
                let activeSongIndex = activeSongMetaData.index
                let activeBackgroundProgressBar = document.getElementById('songProgressBackground_'+activeSongIndex);
                let referenceProgressBar = document.getElementById('song-played-progress');
                progressArray.push(activeBackgroundProgressBar)
                // $(activeBackgroundProgressBar).animate({'left': '-90%'}, 1000, 'easeOutCirc', function(){
                //   console.log('finished aniamte ');
                // })
                setInterval(function(){
                  // let referenceProgressBar = document.getElementById('song-played-progress');
                  let percentage = convertToPercentage(referenceProgressBar.value, -90)
                    $(activeBackgroundProgressBar).css('left', percentage )
                }, 50)

                if (progressArray.length > 1){
                  $(progressArray[0]).removeClass('activeSongProgressBackground')
                  $(progressArray[1]).addClass('activeSongProgressBackground')

                  progressArray = progressArray.slice(1)
                  // setInterval(function(){
                  //   // let referenceProgressBar = document.getElementById('song-played-progress');
                  //   let percentage = convertToPercentage(referenceProgressBar.value, -90)
                  //     $(progressArray[1]).css('left', percentage )
                  //     // console.log('PERCENTAGE', percentage)
                  // }, 50 )
                } else {
                  activeBackgroundProgressBar.addClass('activeSongProgressBackground')
                    setInterval(function(){
                        // let referenceProgressBar = document.getElementById('song-played-progress');
                      console.log(referenceProgressBar.value);
                      let percentage = convertToPercentage(referenceProgressBar.value, -90)
                      $(activeBackgroundProgressBar).css('left', percentage )
                      // console.log('PERCENTAGE', percentage)
                    }, 50 )
                }






              }
            }
            amplitudeSetup(amplitudeDataObjs)

        });

        window.onscroll = function(){
          scrollPercentage = _get_scroll_percentage()
          console.log(granimInstance.state);
          let intervalArray = percentageRanges(4)
          console.log('INTERVALARRAY', intervalArray)

          // if (scrollPercentage>30) {
          let stateToSet = determineNewGradient(scrollPercentage, intervalArray)
          granimInstance.changeState(stateToSet)
          // }
          console.log('SCROLLPERCENTAGE', scrollPercentage)
        }
        function determineNewGradient(theScrollPercentage, valueArr){
          return theScrollPercentage < valueArr[0] ? '1':
                 theScrollPercentage < valueArr[1] ? '2':
                 theScrollPercentage < valueArr[2] ? '3':
                 theScrollPercentage < valueArr[3] ? '4': '5';
                 // theScrollPercentage < valueArr[4] ? '4'
                 // ;
        }
        function percentageRanges(numberOfElements){
          let interval = 100/numberOfElements
          let intervalArray = []
          for (var i = 0; i < numberOfElements; i++) {
            let intervalMult = i*interval
            intervalArray.push(intervalMult)
          }
          return intervalArray
        }

        function convertToPercentage(val, start){
          let percentage = (start + (val*100)) + '%'
          return percentage
        }

        function switchPlaylist(e){
          console.log('CLIKED ID', e.id);
          if (e.id === 'nextButton') {
            currentPlayListIndex++;
          } else {
            currentPlayListIndex--;
          }
          currentAlbumObj = albumObjs[currentPlayListIndex]
          // toScrollTo = currentAlbumObj.albumSceneContainer.
          toScrollTo = albumObjs[currentPlayListIndex].albumPlaylistContainer.parentNode
          console.log(albumObjs);
          // console.log('TOSCROLLTO', toScrollTo)
          // $('.leftArrow').click(function(event){
            // event.preventDefault();
          // $('#allPlaylistsContainer').animate({scrollLeft:'+=1500'},500);

          // console.log(currentPlayListIndex);
            $('body').scrollTo(toScrollTo, 500, {
              axis: 'x',
              margin: false
          })
        }

        function groupBy(list, keyGetter) {
            const map = new Map();
            list.forEach((item) => {
                 const key = keyGetter(item);
                 const collection = map.get(key);
                 if (!collection) {
                     map.set(key, [item]);
                 } else {
                     collection.push(item);
                 }
            });
            return map;
        }

        function makeAlbumObjs(mapGroup, parentElem){
          let array = Array.from(mapGroup)
          let groupObjArray = []


          for (var i = 0; i < array.length; i++) {
            let curTempAlbumData = array[i]
            let albumSceneContainer = createClassIdAppend(parentElem, 'div', 'albumSceneContainer', 'albumSceneContainer_'+i)
            let playlistContainer = createClassIdAppend(albumSceneContainer, 'div', 'albumPlaylistContainer amplitudeRight', 'albumPlaylistContainer_'+i)
            let progressBar = createClassIdAppend(playlistContainer, 'progress', 'amplitude-song-played-progress', 'song-played-progress')
            progressBar.setAttribute('data-amplitude-playlist', 'WEIRD NXC - ACT 1')
            // let playlistTexture = createClassIdAppend(playlistContainer, 'img', 'playlistTexture')
            // setElemAttribute(playlistTexture, 'src', 'data/textures/glasstexture1.png')
            let albumPlaylist = generatePlaylist(playlistContainer, curTempAlbumData)
            let randomColor2 = getRandomColor()
            $(playlistContainer).css('background-color', 'rgba(255, 255, 255, 0)')
            $(albumSceneContainer).css('background-color', 'rgba(255, 255, 255, 0)')
            let albumObj = {
              'albumName': curTempAlbumData[0],
              'albumSongObjs': curTempAlbumData[1],
              'albumSceneContainer': albumSceneContainer,
              'albumPlaylistContainer': playlistContainer
            }
            groupObjArray.push(albumObj)
          }
          return groupObjArray
        }

        function onlyUnique(value, index, self) {
            return self.indexOf(value) === index;
        }

        function getAllValuesInColumn(theHeaderCells, theSheetCeels, columnName, ignoreHeader){
          var desiredHeaderCell = theHeaderCells.filter(obj => {
              return obj.content.$t  === columnName
          })
          let headerColumnName = desiredHeaderCell[0].gs$cell.col
          let columnCells = theSheetCeels.filter(test => {
              return test.gs$cell.col  === headerColumnName
          })
          let desiredColumnValues = columnCells.map(a=>a.content.$t)

          if (ignoreHeader == true) {
            desiredColumnValues.shift()
          }
          return desiredColumnValues;
        }

        function sortObjectsBasedOnValue(){
          let key = onlyUnique()
        }

        // console.log('SONGDATAOBJS', songDataObjs)
        // cl
        function makeSongContainer(parentElem, index) {
          let songContainer = createClassIdAppend(parentElem, 'div', "song amplitude-song-container amplitude-play-pause", 'songContainer_'+index)
          let songNowPlayingIconContainer = createClassIdAppend(songContainer,'div', 'song-now-playing-icon-container', 'songNowPlayingIconContainer'+index)
          let playButtonContainer = createClassIdAppend(songNowPlayingIconContainer, 'div', 'play-button-container', 'playButtonContainer_'+index)
          let nowPlaying = createClassIdAppend(songNowPlayingIconContainer, 'img', 'now-playing', 'nowPlaying_'+index)

          let songMetaData = createClassIdAppend(songContainer, 'div', 'song-meta-data', 'songMetaData_'+index)
          let songTitle = createClassIdAppend(songMetaData, 'a', 'song-title', 'songTitle_'+index)
          let songArist = createClassIdAppend(songMetaData, 'span', 'song-artist', 'songArist_'+index)

          let bandcampLink = createClassIdAppend(songContainer, 'a', 'bandcamp-link', 'bandcampLink_'+index)
          let bandcampGray = createClassIdAppend(bandcampLink, 'img', 'bandcamp-grey', 'bandcampGray_'+index)
          let bandcampWhite = createClassIdAppend(bandcampLink, 'img', 'bandcamp-white', 'bandcampWhite_'+index)

          let songDuration = createClassIdAppend(songContainer, 'span', 'song-duration', 'songDuration_'+index)

          let songProgressBackground = createClassIdAppend(songContainer, 'div', 'songProgressBackground', 'songProgressBackground_'+index)
          // $(songProgressBackground).toggleClass('songProgressBackground')
          let songContainerObj = {
             'songContainer':songContainer,
             'songNowPlayingIconContainer': songNowPlayingIconContainer,
             'playButtonContainer': playButtonContainer,
             'nowPlaying': nowPlaying,
             'songMetaData': songMetaData,
             'songTitle': songTitle,
             'songArist': songArist,
             'bandcampLink': bandcampLink,
             'bandcampGray': bandcampGray,
             'bandcampWhite': bandcampWhite,
             'songDuration': songDuration
          }
          return songContainerObj;
        }

        function generateSongURLString(dObj, songIndex, albumNum){
          let songNum = leadingZero(songIndex)
          let artistName = generateArtistText(dObj)
          let dash = '-'
          let songName = ([songNum, artistName, dash, dObj.name].join(' '))+'.mp3'
          let albumFolder = 'album'+albumNum
          let songAddress = ['data', albumFolder, songName].join('/')
          let encoded = encodeURI(songAddress)
          return encoded
        }

        function generateArtistText(dObj){
          let artistNameString
          if (dObj.collab_symbol !== 'NA') {
            artistNameString = [dObj.artist1, dObj.collab_symbol, dObj.artist2].join(' ')
          } else {
            artistNameString = dObj.artist1
          }
          return artistNameString
        }

        function leadingZero(num){
          numPlus = num+1;
          let formattedNum
          if(numPlus.toString().length < 2){
           formattedNum= "0"+numPlus;
         } else {
           formattedNum = numPlus
         }
         return formattedNum
        }
        // /data/album0/04%20「%20P%20H%20Y%20S%20A%20」-%20w0nd3rful.mp3
        // 04%20%E3%80%8C%20P%20H%20Y%20S%20A%20%E3%80%8D%20-%20w0nd3rful.mp3

        function generateAmpltiudeDataObjArray(albums){
         var playListObj = {}
         let testFinal = {}

          for (var i = 0; i < 1; i++) {
              let curAlbum = albums[i]
              let curSongObjs = curAlbum.albumSongObjs
              let albumSongPlaylist = []
              for (var j = 0; j < curSongObjs.length; j++) {
                 let amplitudeDataObjArray = []
                 let curSong = curSongObjs[j]
                 let songLocation = generateSongURLString(curSong, j, i)
                 console.log('SONGLOCATION', songLocation)

                 let ampDO = {
                   'name': curSong.name,
                   'artist': generateArtistText(curSong),
                   'album': curSong.album,
                   'url': songLocation,
                   // 'url': 'data/album0/04%20「%20P%20H%20Y%20S%20A%20」-%20w0nd3rful.mp3',
                   // 'url': 'data/album0/04%20%E3%80%8C%20P%20H%20Y%20S%20A%20%E3%80%8D%20-%20w0nd3rful.mp3',
                   'cover_art_url': curSong.cover_art_url
                 }
                 albumSongPlaylist.push(ampDO)
               }
               let songsObj = {
                 'songs': albumSongPlaylist
               }
               playListObj[curAlbum.albumName] = songsObj

               testFinal.playlists = playListObj

           }
          // finalAmplitudeObj.playlists = playListObj
          return testFinal
        }

        function amplitudeSetup(dataObjs){
          let bandcampLinks = document.getElementsByClassName('bandcamp-link');

          for( var i = 0; i < bandcampLinks.length; i++ ){
            bandcampLinks[i].addEventListener('click', function(e){
                e.stopPropagation();
            });
          }


          let songElements = document.getElementsByClassName('song');

          for( var i = 0; i < songElements.length; i++ ){
            /*

                Ensure that on mouseover, CSS styles don't get messed up for active songs.
            */
            songElements[i].addEventListener('mouseover', function(){
                // this.style.backgroundColor = '#00A0FF';
                // console.log(i);
                // console.log('got hovered');
                $(this).toggleClass('myGradientFill')
                this.querySelectorAll('.song-meta-data .song-title')[0].style.color = '#FFFFFF';
                this.querySelectorAll('.song-meta-data .song-artist')[0].style.color = '#FFFFFF';

                if( !this.classList.contains('amplitude-active-song-container') ){
                    this.querySelectorAll('.play-button-container')[0].style.display = 'block';
                }

                this.querySelectorAll('img.bandcamp-grey')[0].style.display = 'none';
                this.querySelectorAll('img.bandcamp-white')[0].style.display = 'block';
                this.querySelectorAll('.song-duration')[0].style.color = '#FFFFFF';
            });
              // console.log(e);
              // console.log(this);
            // });


            /*
                Ensure that on mouseout, CSS styles don't get messed up for active songs.
            */
            songElements[i].addEventListener('mouseout', function(){
                $(this).toggleClass('myGradientFill')
                this.style.backgroundColor = 'rgba(0, 0, 0, 0)';
                this.querySelectorAll('.song-meta-data .song-title')[0].style.color = '#272726';
                this.querySelectorAll('.song-meta-data .song-artist')[0].style.color = '#607D8B';
                this.querySelectorAll('.play-button-container')[0].style.display = 'none';
                this.querySelectorAll('img.bandcamp-grey')[0].style.display = 'block';
                this.querySelectorAll('img.bandcamp-white')[0].style.display = 'none';
                this.querySelectorAll('.song-duration')[0].style.color = '#607D8B';
            });

            /*
                Show and hide the play button container on the song when the song is clicked.
            */
            songElements[i].addEventListener('click', function(){
                this.querySelectorAll('.play-button-container')[0].style.display = 'none';
            });
          }

          /*
            Initializes AmplitudeJS
          */
          Amplitude.init(dataObjs)
        }

        function generatePlaylist(parentElem, albumDataArray) {
          let albumSongArray = albumDataArray[1]
          let albumName = albumDataArray[0]
          for (var i = 0; i < albumSongArray.length; i++) {
            let curSongDataObj = albumSongArray[i]
            let curSongHTMLObj =  makeSongContainer(parentElem,i)
            setSongHTMLObjContent(curSongHTMLObj, curSongDataObj, i, albumName)
            songHTMLSections.push(curSongHTMLObj)
          }
        }

        function setSongHTMLObjContent(hObj, dObj, index, albumName){
          console.log('ALBUMNAME', albumName)

          // console.log('DOBJ', dObj)
          setElemAttribute(hObj.songContainer, 'data-amplitude-song-index', index)
          $(hObj.songContainer).attr('data-amplitude-playlist', albumName)
          setElemAttribute(hObj.nowPlaying, 'src', 'https://521dimensions.com/img/open-source/amplitudejs/blue-player/now-playing.svg')
          $(hObj.songContainer).attr('data-amplitude-song-index', index)
          let artistName = generateArtistNameString(dObj)
          setElemAttribute(hObj.songTitle, 'innerHTML', dObj.name)

          setElemAttribute(hObj.songArist, 'innerHTML', artistName)
          setElemAttribute(hObj.bandcampLink, 'href', dObj.Artist_Link)
          setElemAttribute(hObj.songDuration, 'innerHTML', dObj.Song_Duration)

          setElemAttribute(hObj.bandcampLink, 'target', '_blank')
          setElemAttribute(hObj.bandcampGray, 'src','https://521dimensions.com/img/open-source/amplitudejs/blue-player/bandcamp-grey.svg')
          setElemAttribute(hObj.bandcampWhite, 'src','https://521dimensions.com/img/open-source/amplitudejs/blue-player/bandcamp-white.svg')

        }

        function generateArtistNameString(dObj){
          let artistNameString
          if (dObj.collab_symbol !== 'NA') {
            artistNameString = [generateArtistLink(dObj, dObj.artist1, dObj.artist1_Link), dObj.collab_symbol, generateArtistLink(dObj, dObj.artist2, dObj.artist2_Link )].join(' ')
          } else {
            artistNameString = generateArtistLink(dObj, dObj.artist1, dObj.artist1_Link)
          }
          return artistNameString
        }

        function generateObjectFromSpreadData(url) {
            // const response = await fetch('')
            let myCellContentArr = []
            let finalProjObs = []
            let starts = []
            let ranges = []
            let testProjArray = []

            return $.getJSON(url).then(function(data) {
              rawJSON = data;
              cells = data.feed.entry;
              // console.log('CELLS', cells)
              let numRows = parseInt(data.feed.gs$rowCount.$t)
              let numCols = parseInt(data.feed.gs$colCount.$t)
              let totalNumCels = numRows * numCols;

              for (var i = 0; i < numRows; i++) {
                let range = numCols * i;
                starts.push(range)
              }

              for (var i = 0; i < starts.length; i++) {
                let curStart = starts[i]
                let curRange = []
                curRange[0] = curStart
                curRange[1] = curStart + numCols
                ranges.push(curRange)
              }

              for (var i = 0; i < ranges.length; i++) {
                let curRange = ranges[i]
                let projArray = cells.slice(curRange[0], curRange[1])
                let contentArray = []
                for (var j = 0; j < projArray.length; j++) {
                  let curCell = projArray[j]
                  let curContent = curCell.content.$t;
                  contentArray.push(curContent)
                }
                myCellContentArr.push(contentArray)
              }

              for (var i = 0; i < cells.length; i++) {
                let curCell = cells[i]
              }

              headerCells = cells.filter(obj => {
                return obj.gs$cell.row === "1"
              })

              headerNames = headerCells.map(a => a.content.$t)
              let testObj = {}
              for (var i = 1; i < myCellContentArr.length; i++) {
                let curContentArray = myCellContentArr[i]
                let contentObjHolder = {}
                for (var j = 0; j < headerNames.length; j++) {
                  let curPropToAdd = headerNames[j]
                  contentObjHolder[curPropToAdd] = curContentArray[j]

                }
                finalProjObs.push(contentObjHolder)
              }

              return finalProjObs
            })
        }
        //babylon
        function positionObjects(objects, position){

        }
        function initializeLights(myScene){
          var reflectionTexture = new BABYLON.HDRCubeTexture("./textures/environment.hdr", myScene, 128, false, true, false, true);
          var light1 = new BABYLON.HemisphericLight("light1", new BABYLON.Vector3(1, 1, 0), myScene);
          var light2 = new BABYLON.PointLight("light2", new BABYLON.Vector3(0, 1, -1), myScene);
        }

        function initializeParticleSystem(myScene, size, emitRate){

          var particleSystem = new BABYLON.ParticleSystem("particles", 10000, scene);

          particleSystem.particleTexture = new BABYLON.Texture("data/textures/cloudTest.png", scene);
          particleSystem.blendMode = BABYLON.ParticleSystem.BLENDMODE_STANDARD;
          particleSystem.addDragGradient(0, 0.5)
          particleSystem.minLifetime = 0.3;
          particleSystem.maxLifeTime = 400;
          particleSystem.addSizeGradient(10.0, 1);
          // particleSystem.minSize = 0.00001;
          // particleSystem.maxSize = 0.001;
          particleSystem.minSize = 1;
          particleSystem.maxSize = 10;
          particleSystem.minEmitPower = 1;
          particleSystem.maxEmitPower = 10;
          // particleSystem.addStartSizeGradient(0, 2);
          // particleSystem.blendMode = BABYLON.ParticleSystem.BLENDMODE_MULTIPLY;
          // particleSystem.emitRate = emitRate
          particleSystem.emitter = new BABYLON.Vector3(0, -15, 0); // the starting object, the emitter
          particleSystem.minEmitBox = new BABYLON.Vector3(-1*size, -1*size, -1*size); // Starting all from
          particleSystem.maxEmitBox = new BABYLON.Vector3(size, size, size); // To...
          particleSystem.start();
        }

        function dynamicCanvasMaterial(canvasSourceElement, myScene ) {
          var texture = new BABYLON.DynamicTexture("dynamic texture", canvasSourceElement, scene);
          var textureContext = texture.getContext('2d');
          var mat = new BABYLON.StandardMaterial("mat", myScene);
          mat.emissiveTexture = texture;
          setInterval(function(){
            texture.update()
          }, 10)
          return mat;
        }

        function initializeCamera(myScene, enableArc) {
          if (enableArc == true) {
              var camera = new BABYLON.ArcRotateCamera("Camera", Math.PI / 2, Math.PI / 2, 2, new BABYLON.Vector3(0,0,5), myScene);
          } else {
              var camera = new BABYLON.UniversalCamera("Camera", new BABYLON.Vector3(0,0,5), myScene);
              camera.setTarget(BABYLON.Vector3.Zero());
          }


          var lensEffect = new BABYLON.LensRenderingPipeline('lens', {
              // edge_blur: 1.0,
              // chromatic_aberration: .1,
              // distortion: 1.0,
              // dof_focus_distance: 6,
              // dof_aperture: 6.0,			// set this very high for tilt-shift effect
              // grain_amount: 0.1,
              // dof_pentagon: true,
              // dof_gain: 1.0,
              // dof_threshold: 1,
              // dof_threshold: .1,
              // dof_darken: 0.25
            }, myScene, 1.0, camera
          );
          return camera;
        }

        function generateSphere(myScene, options, material){
          let generatedSphere = BABYLON.MeshBuilder.CreateSphere("sphere", options, myScene);
          generatedSphere.material = material;
          return generatedSphere;
        }

        function generateAnimation(obj, myScene){
              var animationTorus = new BABYLON.Animation("torusEasingAnimation", "position", 30, BABYLON.Animation.ANIMATIONTYPE_VECTOR3, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);
              // let startPos = obj.position
              // the torus destination position
              var nextPos = obj.position.add(new BABYLON.Vector3(0, 2, 0));

              // Animation keys
              var keysTorus = [];
              keysTorus.push({ frame: 0, value: obj.position });
              keysTorus.push({ frame: 120, value: nextPos });
              keysTorus.push({ frame: 200, value: obj.position });
              animationTorus.setKeys(keysTorus);

              // Adding an easing function
              // You can use :
              //1.	CircleEase()
              //2.	BackEase(amplitude)
              //3.	BounceEase(bounces, bounciness)
              //4.	CubicEase()
              //5.	ElasticEase(oscillations, springiness)
              //6.	ExponentialEase(exponent)
              //7.	PowerEase(power)
              //8.	QuadraticEase()
              //9.	QuarticEase()
              //10.	QuinticEase()
              //11.	SineEase()
              // And if you want a total control, you can use a Bezier Curve animation
              //12.   BezierCurveEase(x1, y1, x2, y2)
              var easingFunction = new BABYLON.CircleEase();

              // For each easing function, you can choose beetween EASEIN (default), EASEOUT, EASEINOUT
              easingFunction.setEasingMode(BABYLON.EasingFunction.EASINGMODE_EASEINOUT);

              // Adding easing function to my animation
              animationTorus.setEasingFunction(easingFunction);

              // Adding animation to my torus animations collection
              obj.animations.push(animationTorus);

              //Finally, launch animations on torus, from key 0 to key 120 with loop activated
              myScene.beginAnimation(obj, 0, 200, true);
        }

        function setSceneCameraToGlbCamera(glb, myScene){
          let testCam = glb.cameras[0]
          myScene.activeCamera = testCam;
        }

        function assignColor(obj, color, myScene){
           let toAssignMat = new BABYLON.StandardMaterial('matName', myScene)
           toAssignMat.diffuseColor = new BABYLON.Color3(color)
           obj.material = toAssignMat

        }

        function attachPointerDragBehavior(obj, myHighlightLayer){
          console.log('OBJ', obj)
          let pointerDragBehaviorToAdd = new BABYLON.PointerDragBehavior({dragAxis: new BABYLON.Vector3(0,1,0)});
          // let pointerDragBehaviorToAdd = new BABYLON.PointerDragBehavior({dragAxis: new BABYLON.Vector3(1,0,1)});
          // let pointerDragBehaviorToAdd = new BABYLON.PointerDragBehavior({dragPlaneNormal: new BABYLON.Vector3(1,0,1)});
          // let pointerDragBehaviorToAdd = new BABYLON.PointerDragBehavior({dragPlaneNormal: new BABYLON.Vector3(0,1,1)});
          // let pointerDragBehaviorToAdd = new BABYLON.PointerDragBehavior({dragPlaneNormal: new BABYLON.Vector3(1,1,0)});
          // let pointerDragBehaviorToAdd = new BABYLON.PointerDragBehavior({dragAxis: new BABYLON.Vector3(0,1,1)});
          pointerDragBehaviorToAdd.useObjectOrienationForDragging = false;
         pointerDragBehaviorToAdd.moveAttached = false;
          // Use drag plane in world space
          pointerDragBehaviorToAdd.useObjectOrientationForDragging = false;

          //START
          pointerDragBehaviorToAdd.onDragStartObservable.add((event)=>{
              myHighlightLayer.addMesh(obj, BABYLON.Color3.Green());
          })

          //DRAG
          pointerDragBehaviorToAdd.onDragObservable.add((event)=>{
              obj.position.x += event.delta.x
              obj.position.y += event.delta.y
              obj.position.z += event.delta.z
          })
          //END
          pointerDragBehaviorToAdd.onDragEndObservable.add((event)=>{
              myHighlightLayer.removeMesh(obj)
          })
          obj.addBehavior(pointerDragBehaviorToAdd)

        }

        var canvas = document.getElementById("mainCanvas"); // Get the canvas element
                var engine = new BABYLON.Engine(canvas, true); // Generate the BABYLON 3D engine

                /******* Add the create scene function ******/
                var createScene = function () {
                    var pbS = 10;
                    var scene = new BABYLON.Scene(engine);
                     var hl = new BABYLON.HighlightLayer("hl1", scene);
                    var camera = initializeCamera(scene, true)
                    initializeLights(scene)
                    // initializeParticleSystem(scene, 5, 1000)
                    // canvasGradientMaterial = dynamicCanvasMaterial(document.getElementById('gradientCanvas'), scene)

                    var testObj;
                    let testSphere = generateSphere(scene, {diameter: 2})
                    testSphere.position = new BABYLON.Vector3(0,3,0)
                    attachPointerDragBehavior(testSphere)
                    assignColor(testSphere, '(1,1,1)', scene)
                    // generateAnimation(testSphere, scene)

                    // var backgroundPlane = BABYLON.MeshBuilder.CreatePlane("plane", {height:10, width: 10}, scene);
                    // var backgroundPlane = BABYLON.MeshBuilder.CreatePlane("plane", {height:1, width: 1}, scene);
                    // backgroundPlane.material = canvasGradientMaterial
                    // backgroundPlane.material = blackMat
                    // var backgroundPlane;

                    // var sphere = BABYLON.MeshBuilder.CreateSphere("sphere", {diameter:5}, scene);
                    // BABYLON.SceneLoader.Append("data/3D_Models/", "fence.glb", scene, function (added) {

                    BABYLON.SceneLoader.Append("data/3D_Models/", "testScene1.glb", scene, function (added) {
                      // console.log('ADDED', added)
                      testObj = added.meshes[2]

                      for (var i = 0; i < added.meshes.length; i++) {
                      }
                      setSceneCameraToGlbCamera(added, scene)
                      assignColor(testObj, '(1,0,1)', scene)

                    });

                    document.querySelector('#mainCanvas').addEventListener('click', function(evt){
                      var pickResult = scene.pick(evt.clientX, evt.clientY);
                      if (pickResult.hit == false) {
                        // $($)
                      } else {
                        // console.log('PICKRESULT', pickResult)
                        let curPickedMesh = pickResult.pickedMesh;
                        attachPointerDragBehavior(curPickedMesh, hl)
                      }

                      // console.log(pickResult);
                    });

                    scene.clearColor = new BABYLON.Color4(0,0,0,0)
                    return scene;
                };

                var scene = createScene(); //Call the createScene function

                engine.runRenderLoop(function () {

                    scene.render();
                });
                function controlOffset(){

                }
                // Watch for browser/canvas resize events
                window.addEventListener("resize", function () {
                        engine.resize();
                });


        // utils
        function generateArtistLink(dObj, artistName, artistLink) {
            generatedString = '<a' + ' target=' + '_blank' + ' ' + 'href=' + artistLink + '>' + artistName + '</a>'
            return generatedString
        }

        function setElemAttribute(elem, attr, content) {
          elem[attr] = content
        }

        function createClassIdAppend(parentElem, htmlType, className, idName) {

              let testPar = parentElem
              let elementToAdd = document.createElement(htmlType);
              elementToAdd.setAttribute('class', className);
              elementToAdd.setAttribute('id', idName);
              if (testPar == null) {
                return;
              }
              testPar.appendChild(elementToAdd);
              return elementToAdd;
          }
          // </div>

        function getRandomColor() {
          var letters = '0123456789ABCDEF';
          var color = '#';
          for (var i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)];
          }
          return color;
        }

        $(document).ready(function() {
            $.ajax({
                url: "main.js",
                dataType: "script",
                cache: true
            });
        });


    </script>

    <!-- GET SCROLL PERCENTAGE -->
    <script>
      /**
       * Get current browser viewpane heigtht
       */
       function _get_window_height() {
          return window.innerHeight ||
                 document.documentElement.clientHeight ||
                 document.body.clientHeight || 0;
       }
      /**
       * Get current absolute window scroll position
       */
       function _get_window_Yscroll() {
          return window.pageYOffset ||
                 document.body.scrollTop ||
                 document.documentElement.scrollTop || 0;
      }
      /**
       * Get current absolute document height
       */
       function _get_doc_height() {
          return Math.max(
              document.body.scrollHeight || 0,
              document.documentElement.scrollHeight || 0,
              document.body.offsetHeight || 0,
              document.documentElement.offsetHeight || 0,
              document.body.clientHeight || 0,
              document.documentElement.clientHeight || 0
          );
      }
      /**
       * Get current vertical scroll percentage
       */
       // var testPercentage;
       function _get_scroll_percentage() {

          return (
              (_get_window_Yscroll() + _get_window_height()) / _get_doc_height()
          ) * 100;
       }



    </script>

      <!-- <script type = 'module' src = 'main.js'></script> -->
  </body>

  </html>
